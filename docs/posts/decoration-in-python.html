<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title></title>

  <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind = {
      config: {
        darkMode: 'class'
      }
    };
  </script>
  <script>
    MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']]
        }
    };
    </script>
    <script id="MathJax-script" async 
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>

  <link rel="stylesheet" href="/style.css"/>


    <style>
        /* Code block font size override - needs high specificity */
        pre[class*="language-"],
        pre[class*="language-"] code,
        code[class*="language-"] {
            font-size: 1rem !important;
            line-height: 1.4 !important;
            font-family: 'SF Mono', Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;
        }

        /* Additional code styling improvements */
        pre[class*="language-"] {
            margin: 0.5em 0 !important;
            padding-left: 5px !important;
            border-radius: 0.375rem !important; /* rounded-md */
        }

        /* Dark mode toggle styling improvements */
        .dark-toggle {
          position: relative;
          display: inline-flex;
          align-items: center;
          cursor: pointer;
        }

        .dark-toggle input {
          position: absolute;
          opacity: 0;
          width: 0;
          height: 0;
        }

        .toggle-bg {
          width: 44px;
          height: 24px;
          background-color: #d1d5db;
          border-radius: 12px;
          transition: all 0.3s ease;
          position: relative;
        }

        .dark .toggle-bg {
          background-color: #374151;
        }

        .toggle-dot {
          position: absolute;
          top: 2px;
          left: 2px;
          width: 20px;
          height: 20px;
          background-color: white;
          border-radius: 50%;
          transition: transform 0.3s ease;
        }

        .dark .toggle-dot {
          background-color: #f3f4f6;
          transform: translateX(20px);
        }

        /* Cusdis custom styles */
        #cusdis_thread iframe {
          min-height: 600px !important;
          height: auto !important;
        }

        #cusdis_thread {
          overflow: visible !important;
        }

        /* Override any Cusdis container height restrictions */
        [data-cusdis] {
          min-height: 600px !important;
        }
    </style>

</head>

<body class="font-serif bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300">
  <!-- Header -->
  <!-- Header -->
<header class="border-b border-gray-200 dark:border-gray-700">
  <div class="max-w-3xl mx-auto px-4 py-6 flex justify-between items-center">
    <h1 class="text-2xl font-semibold">
        <a class="text-decoration-none" href="/" style="font-family: Open Sans">bewakes</a>
    </h1>
    
    <!-- Navigation Menu -->
    <nav class="hidden md:flex items-center space-x-6" style="font-family: Open Sans">
      <a href="/about.html" class="text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">about</a>
      <a href="/now.html" class="text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">now</a>
    </nav>

    <div class="flex items-center space-x-4">
      <!-- Mobile Menu Button -->
      <button id="mobileMenuToggle" class="md:hidden p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
      
      <!-- Toggle Switch -->
      <label class="dark-toggle">
        <input type="checkbox" id="darkModeToggle">
        <div class="toggle-bg">
          <div class="toggle-dot"></div>
        </div>
      </label>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobileMenu" class="hidden md:hidden border-t border-gray-200 dark:border-gray-700">
    <div class="max-w-3xl mx-auto px-4 py-4 space-y-2">
      <a href="/about.html" class="block py-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">about</a>
      <a href="/now.html" class="block py-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">now</a>
    </div>
  </div>
</header>


  <main class="max-w-3xl mx-auto px-4 py-10 space-y-10">

    <div class="markdown-content">
    <header>
      <h1 class="title text-4xl text-center">Decoration with Decorators(Python)</h1>
      <p class="post-date text-base text-gray-600 dark:text-gray-400">Mar 12 2018</p>
    </header>
    <section class="pt-0 mt-2 mb-8">
      <div class="flex flex-wrap gap-3">
            <a href="/tags/programming.html" class="text-sm px-3 py-1 rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700 transition">
                programming
            </a>
            <a href="/tags/python.html" class="text-sm px-3 py-1 rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700 transition">
                python
            </a>
      </div>
    </section>


    <article class="prose text-xl/8 dark:prose-invert lg:prose-lg max-w-none">
        <p>Decorators let us decorate and make things beautiful. So does python. It lets us decorate functions and classes. Let's see how.</p>
<h3>Functions are 'first class citizens'</h3>
<p>First class citizens is just a fancy name for things in a computer program that can be treated as 'values', assigned to, passed around functions, returned from function and so on. The easiest and the most basic first class citizen that we can think of in python is an integer. Consider 5, which is an integer and can be assigned to variables, sent to functions or returned from functions.</p>
<p>To understand why functions are first class citizens, let's create some functions:</p>
<pre><code class="language-python">def add(x, y):
    return x + y

def subtract(x, y):
    return x - y
</code></pre>
<p>I know, I know. There's nothing new with them. Everybody knows how to define functions. Let's define another function:</p>
<pre><code class="language-python">def apply(function, x, y):
    return function(x, y)
</code></pre>
<p>Now this is something. With the apply function, we can do things like:</p>
<pre><code class="language-python">apply(add, 3, 4)
# &gt;&gt;&gt; 7
apply(subtract, 2018, 1994)
# &gt;&gt;&gt; 24
</code></pre>
<p>See, we've passed our functions add and subtract to the function apply just like we've passed in 3, 4 and 2018, 1994. One reason why functions are first class citizens.</p>
<p>Let's write some more functions.</p>
<pre><code class="language-python">def get_function(name):
    if name == 'add':
        return add
    elif name == 'subtract':
        return subtract
    elif name == 'multiply':
        f = lambda x, y: x*y
        # Congratulations! we've just assigned a function(lambda) to a value(f)
        # The lambda expression is equivalent to:
        # def f(x, y)
        #  return x*y
        # The values before ':' are arguments and after ':' is the return value.
        return f
    elif name == 'divide':
        def divide(x, y):  # Yes, we can define a function inside a function.
            return x/y
        # However, we can't call 'divide' outside 'get_function', but we can return 'divide'. Of course!!
        return divide
</code></pre>
<p>Contratulations!! we've returned function from a function. Next reason why functions are first class citizens. Why not see it in action?</p>
<pre><code class="language-python">add_function = get_function('add')
add_function(5, 6)
# &gt;&gt;&gt; 11
get_function('subtract')(3, 4)
# This evaluates to: subtract(3, 4)
# &gt;&gt;&gt; -1
get_function('multiply')(8, 11)
# &gt;&gt;&gt; 88
</code></pre>
<h3>Decorators</h3>
<p>Decorators are functions, which return another function. It often happens in python that we want to add some common but extra functionality to python functions. Let's say we want to print how long a function took to execute. We can do this:</p>
<pre><code class="language-python">def my_function_to_be_tracked(value):
    print('The value passed is {}'.format(value))

# code to track time for our function
import time
start = time.time()
my_function_to_be_tracked(&quot;hello there&quot;)
end = time.time()
print(&quot;elapsed time: &quot;, start - end)
# &gt;&gt;&gt; hello there
# &gt;&gt;&gt; elapsed time: 123.33 ms
</code></pre>
<p>Yukk!! It works, but I am not going to write this mess for every function I am going to time track.</p>
<p>A better approach would be:</p>
<pre><code class="language-python">def tracker(func_to_be_tracked):
    def wrapper(value):
        start = time.time()
        function_to_be_tracked(value)
        end = time.time()
        print(&quot;elapsed time: &quot;, start - end, &quot;ms&quot;)
    return wrapper

# now we can do this
tracked_func = tracker(my_function_to_be_tracked)
tracked_func(&quot;hello there&quot;)  # This works!!
# &gt;&gt;&gt; hello there
# &gt;&gt;&gt; elapsed time: 123.33 ms
another_tracked_function = tracker(another_function_with_single_arg)  # This works like charm as well.
</code></pre>
<p>Quite clean, right? Python lets even cleaner code:</p>
<pre><code class="language-python">@tracker  # this is actually decorator syntax
def my_function_to_be_tracked(value):
    print('The value passed is {}'.format(value))

# it will be equivalent to
my_function_to_be_tracked = tracker(my_function_to_be_tracked)
# and we can now call it as
my_function_to_be_tracked('hello')
# &gt;&gt;&gt; hello
# &gt;&gt;&gt; elapsed time: 123.11 ms
</code></pre>
<p>That's all about decorators. Just a syntactic sugar to the wrapper function and renaming the returned function to the wrapped function's name.
However, the tracker wrapper can wrap only the functions with single argument. It is because the wrapper function inside takes only single parameter. We can generalize this to function taking any parameters using the sweet python constructs *args and **kwargs as:</p>
<pre><code class="language-python">def tracker(func_to_be_tracked):
    def wrapper(*args, **kwargs):
        start = time.time()
        function_to_be_tracked(*args, **kwargs)
        end = time.time()
        print(&quot;elapsed time: &quot;, start - end, &quot;ms&quot;)
    return wrapper
</code></pre>
<p>Cool!! Now we're ready to write codes with decorators. I'll write about decorators taking arguments next time.
Till then, keep decorating !!</p>
<blockquote>
<p>This article is inspired by <a href="https://realpython.com/blog/python/primer-on-python-decorators/">this article</a></p>
</blockquote>

    </article>
</div>


    <!-- Comments Section -->
    <div class="mt-16 border-t border-gray-200 dark:border-gray-700 pt-8">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
            <!-- Comment Section Header -->
            <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 flex items-center">
                    <svg class="w-5 h-5 mr-2 text-blue-500 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                    Comments
                </h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Join the conversation below</p>
            </div>

            <!-- Cusdis Container -->
            <div class="p-6">
                <div id="cusdis_thread"
                     data-host="https://cusdis.com"
                     data-app-id="306917f0-653d-4447-9cca-458086bdeb86"
                     data-page-id="decoration-in-python"
                     data-page-url="https://bewakes.com/posts/decoration-in-python.html"
                     data-page-title="Decoration with Decorators(Python)"
                     data-theme="auto">
                    <!-- Loading state -->
                    <div id="cusdis-loading" class="flex items-center justify-center py-12">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 dark:border-blue-400"></div>
                        <span class="ml-3 text-gray-600 dark:text-gray-300">Loading comments...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </main>


  <!-- Footer -->
  <footer class="border-t border-gray-200 dark:border-gray-700 mt-16 py-6 text-center text-sm text-gray-500 dark:text-gray-400">
    &copy; 2017 - 2025 bewakes.
  </footer>

  <script async src="https://cusdis.com/js/cusdis.es.js"></script>

  <script>
    const toggle = document.getElementById('darkModeToggle');
    const htmlEl = document.documentElement;

    // Function to load Prism theme
    function loadPrismTheme(isDark) {
      // Remove existing theme
      const existingTheme = document.querySelector('link[data-prism-theme]');
      if (existingTheme) {
        existingTheme.remove();
      }

      // Add new theme
      const themeLink = document.createElement('link');
      themeLink.rel = 'stylesheet';
      themeLink.setAttribute('data-prism-theme', 'true');
      
      if (isDark) {
        themeLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css';
      } else {
        themeLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css';
      }
      
      document.head.appendChild(themeLink);
      
      // Re-highlight after theme loads and Prism is ready
      themeLink.onload = function() {
        setTimeout(() => {
          if (typeof Prism !== 'undefined') {
            Prism.highlightAll();
          }
        }, 50);
      };
    }

    // Function to update Cusdis theme
    function updateCusdisTheme(isDark) {
      const cusdisThread = document.getElementById('cusdis_thread');
      if (cusdisThread) {
        cusdisThread.setAttribute('data-theme', isDark ? 'dark' : 'light');
        // Reload Cusdis if it's already loaded
        if (window.CUSDIS && typeof window.CUSDIS.reload === 'function') {
          window.CUSDIS.reload();
        }
      }
    }

    // Check for saved theme preference or default to light mode
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

    // Initialize theme
    if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
      htmlEl.classList.add('dark');
      toggle.checked = true;
      loadPrismTheme(true);
      updateCusdisTheme(true);
    } else {
      htmlEl.classList.remove('dark');
      toggle.checked = false;
      loadPrismTheme(false);
      updateCusdisTheme(false);
    }

    // Toggle event listener
    toggle.addEventListener('change', () => {
      if (toggle.checked) {
        htmlEl.classList.add('dark');
        localStorage.setItem('theme', 'dark');
        loadPrismTheme(true);
        updateCusdisTheme(true);
      } else {
        htmlEl.classList.remove('dark');
        localStorage.setItem('theme', 'light');
        loadPrismTheme(false);
        updateCusdisTheme(false);
      }
    });
  </script>

  <!-- Prism.js JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <script>
        // Configure autoloader path
        Prism.plugins.autoloader.languages_path = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/';

    </script>
  <!-- END Prism.js JavaScript -->
    <script>
        // Mobile menu toggle functionality
        document.getElementById('mobileMenuToggle').addEventListener('click', function() {
          const mobileMenu = document.getElementById('mobileMenu');
          mobileMenu.classList.toggle('hidden');
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
          const mobileMenu = document.getElementById('mobileMenu');
          const mobileMenuToggle = document.getElementById('mobileMenuToggle');
          
          if (!mobileMenuToggle.contains(event.target) && !mobileMenu.contains(event.target)) {
            mobileMenu.classList.add('hidden');
          }
        });
    </script>

</body>
</html>
